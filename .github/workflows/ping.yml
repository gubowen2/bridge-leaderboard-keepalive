name: keep-bridge-space-awake

on:
  schedule:
    - cron: "*/10 * * * *"   # every 10 minutes (UTC)
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Curl Medical Leaderboard (cache-busted + retry)
        run: |
          url="https://ylab-open-bridge-medical-leaderboard.hf.space/?t=$(date +%s)"
          curl -sS -L -o /dev/null \
            -H "Cache-Control: no-cache" \
            --connect-timeout 10 --max-time 60 \
            --retry 5 --retry-delay 3 --retry-all-errors \
            -w "medical status=%{http_code}\n" \
            "$url"

      - name: Curl BRIDGE-OPEN Leaderboard (cache-busted + retry)
        run: |
          url="https://ylab-open-bridge-open-leaderboard.hf.space/?t=$(date +%s)"
          curl -sS -L -o /dev/null \
            -H "Cache-Control: no-cache" \
            --connect-timeout 10 --max-time 60 \
            --retry 5 --retry-delay 3 --retry-all-errors \
            -w "open status=%{http_code}\n" \
            "$url"
